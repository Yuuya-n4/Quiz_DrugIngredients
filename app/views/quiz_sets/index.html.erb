<div class="w-full px-1 sm:px-1">

  <div class="note-background rounded-lg shadow-md relative p-2 sm:p-5 mb-6">

    <!-- フラッシュメッセージ -->
    <% flash.each do |type, message| %>
      <div class="<%= type == 'alert' ? 'bg-red-100 border-red-400 text-red-700 max-w-4xl mx-auto' : 'bg-blue-100 border-blue-400 text-blue-700 max-w-4xl mx-auto' %> px-4 py-3 border rounded-lg mb-4">
        <p><%= message %></p>
      </div>
    <% end %>

    <div id="hello-react-root"></div>

  </div>



  <div class="service-background rounded-lg shadow-md relative p-2 sm:p-5">

    <h1 class="text-4xl font-bold text-gray-800 mt-16 mb-6 text-center">ジャンル一覧</h1>

    <!-- クイズセットのリスト -->

    <div class="grid grid-cols-2 gap-2 p-2 sm:grid-cols-2 lg:grid-cols-3 sm:p-2">

      <% @quiz_sets.each do |quiz_set| %>
        <div class="bg-sky-100 rounded-lg shadow-2xl sm:mx-8 md:mx-12 lg:mx-16 mb-6 flex flex-col justify-center items-center aspect-square hover:bg-sky-200 transition duration-300 ease-in-out">
          <%= link_to quiz_set, class: "block no-underline" do %>
            <div class="p-4">
              <h2 class="text-2xl sm:text-xl lg:text-3xl text-blue-600 mb-2 text-center md:mb-6"><%= quiz_set.title %></h2>
              <p class="text-sm sm:text-base lg:text-xl text-gray-600 text-center mb-2 md:mb-6"><%= quiz_set.description %></p>
              <% if user_signed_in? %>
                <div class="p-2 border border-sky-300 rounded-md bg-sky-50 mt-2 max-w-xs mx-auto">
                  <p class="text-base sm:text-xl lg:text-2xl text-center">答えたクイズ数: </p>
                  <p class="text-xl sm:text-xl lg:text-3xl text-center"><%= quiz_set.answered_quizzes_count(current_user) %> / <%= quiz_set.total_quizzes_count %></p>
                </div>
              <% else %>
                <div class="p-2 border border-sky-300 rounded-md bg-sky-50 mt-2 max-w-xs mx-auto">
                  <p class="text-base sm:text-xl lg:text-2xl text-center">答えたクイズ数: </p>
                  <p class="text-md sm:text-sm lg:text-xl text-center">ログインで表示</p>
                </div>
              <% end %>
            </div>
          <% end %>
        </div>
      <% end %>

    </div>
  </div>

    <div class="bg-green-400 p-6 rounded-lg shadow-md mt-6 max-w-4xl mx-auto hover:bg-green-500">
      <%= link_to start_weak_quizzes_path, class: "block" do %>
        <h2 class="text-4xl font-bold text-gray-800 mb-2 text-center">苦手克服チャレンジ</h2>
        <p class="text-lg text-gray-700 text-center">苦手なクイズの克服にチャレンジできます。</p>
        <p class="text-lg text-gray-700 text-center">各クイズにたくさん挑戦した後にチャレンジしてください。</p>
        <% if user_signed_in? %>
          <div class="p-2 border border-sky-300 rounded-md bg-green-100 mt-2 max-w-xs mx-auto">
            <p class="text-base font-bold sm:text-xl lg:text-2xl text-center">苦手克服度:</p>
            <p class="text-xl font-bold sm:text-xl lg:text-3xl text-center"><%= @mastery_level %>%</p>
          </div>
        <% else %>
          <div class="p-2 border border-sky-300 rounded-md bg-green-100 mt-2 max-w-xs mx-auto">
            <p class="text-base font-bold sm:text-xl lg:text-2xl text-center">苦手克服度:</p>
            <p class="text-xl sm:text-xl lg:text-2xl text-center">ログインで表示</p>
          </div>
        <% end %>
      <% end %>
    </div>
    
    <div class="bg-blue-100 p-6 rounded-lg shadow-md mt-6 max-w-4xl mx-auto hover:bg-blue-200">
      <%= link_to quizzes_path, class: "block" do %>
        <h2 class="text-2xl font-bold text-gray-800 mb-2 text-center">クイズ一覧</h2>
        <p class="text-lg text-gray-700 text-center">全てのクイズを検索して見ることができます。</p>
        <p class="text-lg text-gray-700 text-center">気になったクイズがあったら、検索してみてください。</p>
      <% end %>
    </div>
</div>

<script src="/assets/top_page.js"></script>